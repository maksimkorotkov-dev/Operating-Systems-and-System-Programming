#include <stdio.h>#include <stdlib.h>#include <string.h>#include <sys/statvfs.h>#include <sys/types.h>#include <sys/utsname.h>#include <dirent.h>#include <time.h>#include <unistd.h>#include <sys/stat.h>#define CONFIG_FILE ".last_dir"// Печать системной информацииvoid print_system_info() {    struct utsname sysinfo;    uname(&sysinfo);    printf("OS: %s %s\n", sysinfo.sysname, sysinfo.release);    char hostname[256];    gethostname(hostname, sizeof(hostname));    printf("Computer name: %s\n", hostname);    time_t t = time(NULL);    printf("Current time: %s\n", ctime(&t));  // добавлена пустая строка после ctime}// Печать точек монтирования с использованием columnvoid print_mounts() {    FILE *fp = fopen("/proc/mounts", "r");    if (!fp) return;    char device[256], mountpoint[256], fs[64], options[256];    int freq, passno;    FILE *pipe_fp = popen("column -t", "w");    if (!pipe_fp) {        fclose(fp);        return;    }    fprintf(pipe_fp, "Mount Point       Total MB    Free MB\n");    while (fscanf(fp, "%255s %255s %63s %255s %d %d\n",                  device, mountpoint, fs, options, &freq, &passno) == 6) {        struct statvfs buf;        if (statvfs(mountpoint, &buf) == 0) {            unsigned long total = buf.f_blocks * buf.f_frsize / 1024 / 1024;            unsigned long free = buf.f_bfree * buf.f_frsize / 1024 / 1024;            fprintf(pipe_fp, "%-18s  %-10lu  %-10lu\n", mountpoint, total, free);        }    }    fclose(fp);    pclose(pipe_fp);}// Печать содержимого директории (только пользовательские файлы и папки)void list_directory(const char *path) {    DIR *dir = opendir(path);    if (!dir) {        perror("opendir");        return;    }    FILE *pipe_fp = popen("column -t", "w");    if (!pipe_fp) {        closedir(dir);        return;    }    fprintf(pipe_fp, "Name                 Size       Permissions   Modified\n");    struct dirent *entry;    while ((entry = readdir(dir)) != NULL) {        char *name = entry->d_name;        // Пропускаем скрытые файлы, кроме .last_dir        if (name[0] == '.' && strcmp(name, CONFIG_FILE) != 0) continue;        char fullpath[1024];        snprintf(fullpath, sizeof(fullpath), "%s/%s", path, name);        struct stat st;        if (stat(fullpath, &st) == 0) {            fprintf(pipe_fp, "%-20s  %-10ld  %-12o  %-s",                     name,                    st.st_size,                    st.st_mode & 0777,                    ctime(&st.st_mtime));        }    }    closedir(dir);    pclose(pipe_fp);}// Сохранение последнего просмотренного путиvoid save_last_dir(const char *path) {    char home[256];    snprintf(home, sizeof(home), "%s/%s", getenv("HOME"), CONFIG_FILE);    FILE *fp = fopen(home, "w");    if (fp) {        fprintf(fp, "%s\n", path);        fclose(fp);    }}int main(int argc, char *argv[]) {    print_system_info();    print_mounts();    const char *path = (argc > 1) ? argv[1] : ".";    printf("\n"); // пустая строка перед выводом файлов    list_directory(path);    save_last_dir(path);    return 0;}